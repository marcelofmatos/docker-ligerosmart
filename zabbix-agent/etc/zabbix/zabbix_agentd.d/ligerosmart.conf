UserParameter=ligerosmart.count_mail_queue[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e 'SELECT count(*) FROM mail_queue' $$MYSQL_DATABASE
UserParameter=ligerosmart.count_mail_queue_old[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e 'SELECT count(*) FROM mail_queue WHERE create_time <= DATE_SUB(NOW(), INTERVAL 3 HOUR);' $$MYSQL_DATABASE
UserParameter=ligerosmart.count_users[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) FROM users WHERE valid_id=1 AND login NOT LIKE '%@complemento.net.br' AND login NOT LIKE '%@ligerosmart.com' AND login NOT LIKE '%@localhost' AND id NOT IN (SELECT user_id FROM user_preferences WHERE preferences_key='UserEmail' AND preferences_value LIKE '%@complemento.net.br' OR preferences_value LIKE '%@ligerosmart.com' OR preferences_value LIKE '%@localhost')" $$MYSQL_DATABASE
UserParameter=ligerosmart.list_users[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT login FROM users WHERE valid_id=1 AND login NOT LIKE '%@complemento.net.br' AND login NOT LIKE '%@ligerosmart.com' AND login NOT LIKE '%@localhost' AND id NOT IN (SELECT user_id FROM user_preferences WHERE preferences_key='UserEmail' AND preferences_value LIKE '%@complemento.net.br' OR preferences_value LIKE '%@ligerosmart.com' OR preferences_value LIKE '%@localhost')" $$MYSQL_DATABASE
UserParameter=ligerosmart.count_sessions_users[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT DISTINCT count(session_id)  FROM sessions WHERE data_key = 'UserType' AND data_value = 'User'" $$MYSQL_DATABASE
UserParameter=ligerosmart.count_sessions_customers[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT DISTINCT count(session_id)  FROM sessions WHERE data_key = 'UserType' AND data_value = 'Customer'" $$MYSQL_DATABASE
UserParameter=ligerosmart.count_scheduler_task[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) FROM scheduler_task" $$MYSQL_DATABASE
UserParameter=ligerosmart.count_scheduler_task_old[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) FROM scheduler_task WHERE create_time <= DATE_SUB(NOW(), INTERVAL 3 HOUR);" $$MYSQL_DATABASE
UserParameter=ligerosmart.count_ticket_history_top1[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) from ticket_history WHERE  create_time <= DATE_SUB(NOW(), INTERVAL 10 DAY) GROUP BY ticket_id LIMIT 1" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.count_process_id[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) from process_id" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.count_process_id_old[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) from process_id WHERE  FROM_UNIXTIME(process_create) <= DATE_SUB(NOW(), INTERVAL 1 DAY)" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.clean_scheduler_task[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "DELETE FROM scheduler_task WHERE create_time <= DATE_SUB(NOW(), INTERVAL 20 MINUTE)" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.clean_process_id[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "DELETE FROM process_id WHERE FROM_UNIXTIME(process_create) <= DATE_SUB(NOW(), INTERVAL 20 MINUTE)" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.count_ticket_open[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(ticket.id) FROM ticket JOIN ticket_state ON (ticket_state.id=ticket.ticket_state_id) JOIN ticket_state_type ON (ticket_state.type_id=ticket_state_type.id) WHERE ticket_state_type.name IN ('new','open','pending auto', 'pending reminder')" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.count_table[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) FROM $1" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.sysconfig_modified_option_is_valid[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) FROM sysconfig_modified WHERE name='$1' AND is_valid=1" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.sysconfig_modified_option_is_valid_effective[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) FROM sysconfig_modified WHERE name='$1' AND is_valid=1 AND effective_value LIKE \"--- '1'%\"" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.sysconfig_modified_value[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT effective_value FROM sysconfig_modified WHERE name='$1'" $$MYSQL_DATABASE || echo "--"
UserParameter=ligerosmart.desc_value_table[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT $2 FROM $1 ORDER BY $2 DESC LIMIT 1" $$MYSQL_DATABASE || echo ""
UserParameter=ligerosmart.last_change_value_table[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT $2 FROM $1 ORDER BY change_time DESC LIMIT 1" $$MYSQL_DATABASE || echo ""
UserParameter=ligerosmart.count_ticket_archived[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(*) FROM ticket WHERE archive_flag=1" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.count_article_data_mime_duplicated[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT count(a_message_id_md5) FROM article_data_mime adm JOIN article a ON (adm.article_id=a.id) JOIN ticket t ON (a.ticket_id=t.id) JOIN ticket_state ts ON (t.ticket_state_id=ts.id) JOIN ticket_state_type tst ON (ts.type_id=tst.id) WHERE tst.name <> 'closed' AND adm.create_time >= DATE_SUB(NOW(), INTERVAL 7 DAY) GROUP BY a_message_id_md5,t.tn LIMIT 1" $$MYSQL_DATABASE || echo 0
UserParameter=ligerosmart.ticket_article_data_mime_duplicated[*],env mysql -BN -h $$MYSQL_HOST -u $MYSQL_USER -p$$MYSQL_PASSWORD -e "SELECT GROUP_CONCAT(DISTINCT t.tn) as tickets, a_message_id_md5 FROM article_data_mime adm JOIN article a ON (adm.article_id=a.id) JOIN ticket t ON (a.ticket_id=t.id) JOIN ticket_state ts ON (t.ticket_state_id=ts.id) JOIN ticket_state_type tst ON (ts.type_id=tst.id) WHERE tst.name <> 'closed' AND adm.create_time >= DATE_SUB(NOW(), INTERVAL 7 DAY) GROUP BY a_message_id_md5,t.tn HAVING count(a_message_id_md5) > 1 LIMIT 1" $$MYSQL_DATABASE || echo 0
