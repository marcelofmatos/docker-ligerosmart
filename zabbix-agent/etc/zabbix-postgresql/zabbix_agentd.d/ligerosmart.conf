UserParameter=ligerosmart.count_mail_queue[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c 'SELECT count(*) FROM mail_queue'
UserParameter=ligerosmart.count_mail_queue_old[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) FROM mail_queue WHERE create_time <= NOW() - INTERVAL '3 HOURS';"
UserParameter=ligerosmart.count_users[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) FROM users WHERE valid_id=1 AND login NOT LIKE '%@complemento.net.br' AND login NOT LIKE '%@ligerosmart.com' AND login NOT LIKE '%@localhost' AND id NOT IN (SELECT user_id FROM user_preferences WHERE preferences_key='UserEmail' AND preferences_value LIKE '%@complemento.net.br' OR preferences_value LIKE '%@ligerosmart.com' OR preferences_value LIKE '%@localhost')"
UserParameter=ligerosmart.list_users[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT login FROM users WHERE valid_id=1 AND login NOT LIKE '%@complemento.net.br' AND login NOT LIKE '%@ligerosmart.com' AND login NOT LIKE '%@localhost' AND id NOT IN (SELECT user_id FROM user_preferences WHERE preferences_key='UserEmail' AND preferences_value LIKE '%@complemento.net.br' OR preferences_value LIKE '%@ligerosmart.com' OR preferences_value LIKE '%@localhost')"
UserParameter=ligerosmart.count_sessions_users[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(DISTINCT session_id) FROM sessions WHERE data_key = 'UserType' AND data_value = 'User'"
UserParameter=ligerosmart.count_sessions_customers[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(DISTINCT session_id) FROM sessions WHERE data_key = 'UserType' AND data_value = 'Customer'"
UserParameter=ligerosmart.count_scheduler_task[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) FROM scheduler_task"
UserParameter=ligerosmart.count_scheduler_task_old[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) FROM scheduler_task WHERE create_time <= NOW() - INTERVAL '3 HOURS';"
UserParameter=ligerosmart.count_ticket_history_top1[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) from ticket_history WHERE create_time <= NOW() - INTERVAL '10 DAYS' GROUP BY ticket_id LIMIT 1" || echo 0
UserParameter=ligerosmart.count_process_id[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) from process_id" || echo 0
UserParameter=ligerosmart.count_process_id_old[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) from process_id WHERE TO_TIMESTAMP(process_create) <= NOW() - INTERVAL '1 DAY'" || echo 0
UserParameter=ligerosmart.clean_scheduler_task[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "DELETE FROM scheduler_task WHERE create_time <= NOW() - INTERVAL '20 MINUTES'" || echo 0
UserParameter=ligerosmart.clean_process_id[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "DELETE FROM process_id WHERE TO_TIMESTAMP(process_create) <= NOW() - INTERVAL '20 MINUTES'" || echo 0
UserParameter=ligerosmart.count_ticket_open[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(ticket.id) FROM ticket JOIN ticket_state ON (ticket_state.id=ticket.ticket_state_id) JOIN ticket_state_type ON (ticket_state.type_id=ticket_state_type.id) WHERE ticket_state_type.name IN ('new','open','pending auto', 'pending reminder')" || echo 0
UserParameter=ligerosmart.count_table[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) FROM $1" || echo 0
UserParameter=ligerosmart.sysconfig_modified_option_is_valid[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) FROM sysconfig_modified WHERE name='$1' AND is_valid=1" || echo 0
UserParameter=ligerosmart.sysconfig_modified_option_is_valid_effective[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) FROM sysconfig_modified WHERE name='$1' AND is_valid=1 AND effective_value LIKE '--- ''1''%'" || echo 0
UserParameter=ligerosmart.sysconfig_modified_value[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT effective_value FROM sysconfig_modified WHERE name='$1'" || echo "--"
UserParameter=ligerosmart.desc_value_table[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT $2 FROM $1 ORDER BY $2 DESC LIMIT 1" || echo ""
UserParameter=ligerosmart.last_change_value_table[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT $2 FROM $1 ORDER BY change_time DESC LIMIT 1" || echo ""
UserParameter=ligerosmart.count_ticket_archived[*],env PGPASSWORD=$POSTGRES_PASSWORD psql -h $POSTGRES_HOST -U $POSTGRES_USER -d $POSTGRES_DB -t -c "SELECT count(*) FROM ticket WHERE archive_flag=1" || echo 0
